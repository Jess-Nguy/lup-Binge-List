{"version":3,"sources":["webpack:///./src/views/Settings.vue?465f","webpack:///./src/views/Settings.vue","webpack:///./src/views/Settings.vue?e8e9"],"names":["class","for","type","value","src","user","profile_image","alt","width","height","updateBanners","id","banners","isAdmin","updateUserDetails","username","v$","$error","timezone","aria-label","timezones","tz","i","key","data","localStorage","getItem","name","profileUrl","roleId","computed","getTimezone","this","$store","getters","mounted","getBanners","localToken","$router","push","getUserInfo","validations","required","methods","gotBanners","alert","$validate","setItem","replace","id_user","updateByUserId","getUserById","result","time_zone","__exports__","render"],"mappings":"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","file":"js/chunk-05f512b5.eee7f4a4.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Settings.vue?vue&type=style&index=0&id=7b242a48&lang=css\"","<template>\n  <div class=\"settings\">\n    <h1>Settings</h1>\n    <!-- profile -->\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <img :src=\"user.profile_image\" alt=\"profile image\" width=\"100\" height=\"100\" />\n        <div v-show=\"isAdmin\">\n          <form @submit.prevent=\"updateBanners\">\n            <h3>Add the webpage's Banners</h3>\n            <label for=\"image-link1\">Banner 1: </label>\n            <input type=\"text\" id=\"image-link1\" v-model=\"banners[0]\" />\n            <img :src=\"banners[0]\" alt=\"banner image 1\" width=\"350\" height=\"200\" />\n            <br />\n            <label for=\"image-link1\">Banner 2: </label>\n            <input type=\"text\" id=\"image-link2\" v-model=\"banners[1]\" />\n            <img :src=\"banners[1]\" alt=\"banner image 2\" width=\"350\" height=\"200\" />\n            <br />\n            <label for=\"image-link1\">Banner 3: </label>\n            <input type=\"text\" id=\"image-link3\" v-model=\"banners[2]\" />\n            <img :src=\"banners[2]\" alt=\"banner image 3\" width=\"350\" height=\"200\" /><br />\n            <button type=\"submit\" class=\"btn btn-primary\">Update Banners</button>\n          </form>\n        </div>\n      </div>\n      <form @submit.prevent=\"updateUserDetails\">\n        <div class=\"card-body\">\n          <label for=\"account-username\">Username* : </label>\n          <input type=\"text\" id=\"account-username\" v-model=\"username\" />\n          <div class=\"requiredFields\" v-if=\"v$.username.$error\">Genre field is required</div>\n        </div>\n        <div class=\"card-body\">\n          <label for=\"image-link\">Time zone: </label>\n          <div class=\"btn-group\">\n            <select v-model=\"timezone\" id=\"timezoneDropdown\" class=\"form-select\" aria-label=\"Default select example\">\n              <option value=\"\">-</option>\n              <option v-for=\"(tz, i) in timezones\" :key=\"i\">{{ tz }}</option>\n            </select>\n          </div>\n        </div>\n        <div class=\"card-footer\">\n          <button type=\"submit\" class=\"btn btn-primary\">Save</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n<style>\n.card {\n  color: black;\n}\n</style>\n<script>\nimport DataService from '../../service/dataService';\nimport { required } from '@vuelidate/validators';\nimport { useVuelidate } from '@vuelidate/core';\n\nexport default {\n  data() {\n    return {\n      v$: useVuelidate(),\n      isAdmin: false,\n      banners: [\n        require('@/assets/img/Banner.png'),\n        require('@/assets/img/kBanner.png'),\n        require('@/assets/img/aBanner.png'),\n      ],\n      username: localStorage.getItem('username'),\n      user: {\n        name: localStorage.getItem('username'),\n        profileUrl: localStorage.getItem('profileImage'),\n        id: localStorage.getItem('userId'),\n        roleId: localStorage.getItem('userRoleId'),\n      },\n      timezones: [],\n      timezone: '',\n    };\n  },\n  name: 'Settings',\n  computed: {\n    getTimezone() {\n      return this.$store.getters.getTimezone;\n    },\n  },\n  async mounted() {\n    this.timezones = this.getTimezone;\n\n    if (this.user.roleId == 1) {\n      this.isAdmin = true;\n    }\n    await this.getBanners();\n\n    const localToken = localStorage.getItem('userToken');\n    if (!localToken) {\n      this.$router.push('/');\n    }\n    await this.getUserInfo();\n  },\n  validations() {\n    return {\n      username: { required },\n    };\n  },\n  methods: {\n    async getBanners() {\n      const gotBanners = await DataService.getBanners();\n      if (gotBanners !== null) {\n        this.banners = gotBanners;\n      }\n    },\n    async updateBanners() {\n      if (this.isAdmin) {\n        if (this.banners[0] == '') {\n          this.banners[0] = require('@/assets/img/Banner.png');\n        }\n        if (this.banners[1] == '') {\n          this.banners[1] = require('@/assets/img/kBanner.png');\n        }\n        if (this.banners[2] == '') {\n          this.banners[2] = require('@/assets/img/aBanner.png');\n        }\n\n        const data = {\n          banners: this.banners,\n          id: this.user.id,\n        };\n        await DataService.updateBanners(data);\n        await this.getBanners();\n        alert('Updated banners');\n      }\n    },\n    async updateUserDetails() {\n      this.v$.$validate();\n      if (!this.v$.$error) {\n        localStorage.setItem('username', this.username);\n        const data = {\n          username: this.username.replace(/'/g, \"''\"),\n          timezone: this.timezone,\n          id_user: this.user.id,\n        };\n        await DataService.updateByUserId(data);\n        alert('Updated user details');\n      } else {\n        alert('Need to fill in a username!');\n      }\n    },\n    async getUserInfo() {\n      const result = await DataService.getUserById(this.user.id);\n      this.timezone = result[0].time_zone;\n    },\n  },\n};\n</script>\n","import { render } from \"./Settings.vue?vue&type=template&id=7b242a48\"\nimport script from \"./Settings.vue?vue&type=script&lang=js\"\nexport * from \"./Settings.vue?vue&type=script&lang=js\"\n\nimport \"./Settings.vue?vue&type=style&index=0&id=7b242a48&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\JS\\\\Documents\\\\github\\\\lup-Binge-List\\\\webui\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}